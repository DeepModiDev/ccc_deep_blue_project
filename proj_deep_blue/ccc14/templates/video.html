{% extends 'base.html' %}

{% block content %}

{% if errorMessage %}
    {% for errorItems in errorMessage %}
        <p class="alert alert-danger"> {{errorItems.message}} {{errorItems.items}}</p>
        <hr style="border: 1px dashed gray">
    {% endfor %}
{% endif %}

<div class="align-items-center justify-content-center no-padding" style="padding: 10px">
    <div class=" home-div recent-activities card">
        <div class="row card-header" style="padding: 10px">
            <h3 class="h4 left-col col-lg-6 d-flex align-items-center justify-content-between">
                Upload Video or Enter URL
            </h3>
            <div id="loadingView" class="spinner-border" role="status">
                <span class="sr-only h4">Loading...</span>
            </div>
                <h4 style="margin-left: 10px; margin-top: 5px" class="col align-items-center" id="LoadingText">Loading...</h4>
        </div>
        <div class="card-body">
            <div class="item">
                <form id="videoForm" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <input id="videoUrlId" type="file" class="btn btn-outline-primary" accept="video/*" name="document" required>
                    <button id="uploadVideoBtn"  type="submit" class="btn btn-outline-primary">
                        Upload Video
                    </button>
                </form>
                <p> or </p>
                <form method="post" action="/feed/">
                    {% csrf_token %}
                    <input  type="text" placeholder="Enter URL" class="btn btn-outline-primary" name="feedURL" required>
                    <button type="submit" class="btn btn-outline-primary" onclick="ClearForm()"> GO</button>
                </form>
            </div>
        </div>
    </div>

    {% if processedVideoUrl %}
        <div class=" home-div recent-activities card">
            <div class="row card-header" style="padding: 10px">
                <h3 class="h4 left-col col-lg-6 d-flex align-items-center justify-content-between">
                    Result
                </h3>
            </div>
            <div class="card-body">
                <div class="item" class="video-view" >
                    <video name='demo' controls>
                        <source src="{{ processedVideoUrl.url }}" type="video/mp4"/>
                    </video>
                </div>
            </div>
        </div>
     {% endif %}
</div>

<script>
    $(document).ready(function() {

    });
</script>
{% endblock %}
